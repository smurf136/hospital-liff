<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Result</title>
  </head>
  <body>
    <h1 id="profile"></h1>
    <h2 id="title"></h2>
    <p id="desc"></p>
    <p id="error"></p>
    <button onclick="send()">Send to LINE</button>
    <button onclick="getProfile()">getProfile</button>
    <button onclick="close()">close</button>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
      const results = {
        A: {
          title: "Result A",
          message: "You selected A – static result",
        },
        B: {
          title: "Result B",
          message: "You selected B – static result",
        },
        C: {
          title: "Result C",
          message: "You selected C – static result",
        },
      };

      const params = new URLSearchParams(location.search);
      const c = params.get("c");

      document.getElementById("title").innerText = results[c].title;
      document.getElementById("desc").innerText = results[c].message;

      async function close() {
        liff.closeWindow();
      }

      async function getProfile() {
        await liff.init({ liffId: "2008942006-tbQFVRAB" });
        if (liff.isLoggedIn()) {
          const profile = await liff.getProfile();
          profile.innerText = profile.displayName;
          // update profile
          //   profileImage.src = profile.pictureUrl;
          //   profileName.innerText = profile.displayName;
          //   profileUID.innerText = profile.userId;

          // collect userId
          //   userId = profile.userId;

          // show profile
          lineprofile.style.display = "block";

          await liff.sendMessages([
            {
              type: "text",
              text: "test",
            },
          ]);
        } else {
          liff.login();
        }
      }

      async function send() {
        try {
          const _results = {
            A: {
              title: "Result A",
              message: "You selected A – static result",
            },
            B: {
              title: "Result B",
              message: "You selected B – static result",
            },
            C: {
              title: "Result C",
              message: "You selected C – static result",
            },
          };

          await liff.init({ liffId: "2008942006-tbQFVRAB" });
          if (liff.isLoggedIn()) {
            await liff.sendMessages([
              {
                type: "text",
                text: "test",
              },
            ]);

            await liff.sendMessages([
              {
                type: "text",
                text: _results[c].message,
              },
            ]);

            liff.closeWindow();
          } else {
            liff.login();
          }
        } catch (e) {
          document.getElementById("error").innerText = e;
        }
      }
    </script>
  </body>
</html>
